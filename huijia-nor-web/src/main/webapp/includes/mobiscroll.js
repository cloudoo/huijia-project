/*!
 * jQuery MobiScroll v2.5.1
 * http://mobiscroll.com
 *
 * Copyright 2010-2013, Acid Media
 * Licensed under the MIT license.
 *
 */
(function(x){function e(aq,aw){var ap,az,al,T,ax,R,ar,W,aa,ai,X,aj=this,Y=x.mobiscroll,ay=aq,au=x(ay),ah,U,am=E({},A),af={},Z=[],ae={},an={},Q=au.is("input"),ad=false;function ag(aB){if(x.isArray(am.readonly)){var aC=x(".dwwl",T).index(aB);return am.readonly[aC]}return am.readonly}function ab(aE){var aD='<div class="dw-bf">',aB=1,aC;for(aC in Z[aE]){if(aB%20==0){aD+='</div><div class="dw-bf">'}aD+='<div class="dw-li dw-v" data-val="'+aC+'" style="height:'+az+"px;line-height:"+az+'px;"><div class="dw-i">'+Z[aE][aC]+"</div></div>";aB++}aD+="</div>";return aD}function at(aB){O=x(".dw-li",aB).index(x(".dw-v",aB).eq(0));q=x(".dw-li",aB).index(x(".dw-v",aB).eq(-1));y=x(".dw-ul",T).index(aB);L=az;w=aj}function h(aB){var aC=am.headerText;return aC?(typeof aC==="function"?aC.call(ay,aB):aC.replace(/\{value\}/i,aB)):""}function ac(){aj.temp=((Q&&aj.val!==null&&aj.val!=au.val())||aj.values===null)?am.parseValue(au.val()||aw.defValue||"",aj):aj.values.slice(0);aj.setValue(true)}function av(aE,aD,aC,aB,aF){if(aA("validate",[T,aD,aE])!==false){x(".dw-ul",T).each(function(aJ){var aQ=x(this),aN=x('.dw-li[data-val="'+aj.temp[aJ]+'"]',aQ),aP=x(".dw-li",aQ),aO=aP.index(aN),aG=aP.length,aK=aJ==aD||aD===undefined;if(!aN.hasClass("dw-v")){var aM=aN,aL=aN,aI=0,aH=0;while(aO-aI>=0&&!aM.hasClass("dw-v")){aI++;aM=aP.eq(aO-aI)}while(aO+aH<aG&&!aL.hasClass("dw-v")){aH++;aL=aP.eq(aO+aH)}if(((aH<aI&&aH&&aB!==2)||!aI||(aO-aI<0)||aB==1)&&aL.hasClass("dw-v")){aN=aL;aO=aO+aH}else{aN=aM;aO=aO-aI}}if(!(aN.hasClass("dw-sel"))||aK){aj.temp[aJ]=aN.attr("data-val");x(".dw-sel",aQ).removeClass("dw-sel");aN.addClass("dw-sel");aj.scroll(aQ,aJ,aO,aK?aE:0.1,aK?aF:undefined)}});aj.change(aC)}}function ak(aU){if(am.display=="inline"||(ax===x(window).width()&&ar===x(window).height()&&aU)){return}var aH,aP,aK,aI,aS,aM,aL,aQ,aC,aR,aB,aJ,aN=0,aF=0,aO=x(window).scrollTop(),aD=x(".dwwr",T),aT=x(".dw",T),aG={},aE=am.anchor===undefined?au:am.anchor;ax=x(window).width();ar=x(window).height();R=window.innerHeight;R=R||ar;if(/modal|bubble/.test(am.display)){x(".dwc",T).each(function(){aH=x(this).outerWidth(true);aN+=aH;aF=(aH>aF)?aH:aF});aH=aN>ax?aF:aN;aD.width(aH)}W=aT.outerWidth();aa=aT.outerHeight(true);if(am.display=="modal"){aP=(ax-W)/2;aK=aO+(R-aa)/2}else{if(am.display=="bubble"){aJ=true;aC=x(".dw-arrw-i",T);aM=aE.offset();aL=aM.top;aQ=aM.left;aI=aE.outerWidth();aS=aE.outerHeight();aP=aQ-(aT.outerWidth(true)-aI)/2;aP=aP>(ax-W)?(ax-(W+20)):aP;aP=aP>=0?aP:20;aK=aL-aa;if((aK<aO)||(aL>aO+R)){aT.removeClass("dw-bubble-top").addClass("dw-bubble-bottom");aK=aL+aS}else{aT.removeClass("dw-bubble-bottom").addClass("dw-bubble-top")}aR=aC.outerWidth();aB=aQ+aI/2-(aP+(W-aR)/2);x(".dw-arr",T).css({left:aB>aR?aR:aB})}else{aG.width="100%";if(am.display=="top"){aK=aO}else{if(am.display=="bottom"){aK=aO+R-aa}}}}aG.top=aK<0?0:aK;aG.left=aP;aT.css(aG);x(".dw-persp",T).height(0).height(aK+aa>x(document).height()?aK+aa:x(document).height());if(aJ&&((aK+aa>aO+R)||(aL>aO+R))){x(window).scrollTop(aK+aa-R)}}function ao(aB){if(aB.type==="touchstart"){J=true;setTimeout(function(){J=false},500)}else{if(J){J=false;return false}}return true}function aA(aD,aC){var aB;aC.push(aj);x.each([ah.defaults,af,aw],function(aF,aE){if(aE[aD]){aB=aE[aD].apply(ay,aC)}});return aB}function S(aB){var aC=+aB.data("pos"),aD=aC+1;i(aB,aD>q?O:aD,1,true)}function V(aB){var aC=+aB.data("pos"),aD=aC-1;i(aB,aD<O?q:aD,2,true)}aj.enable=function(){am.disabled=false;if(Q){au.prop("disabled",false)}};aj.disable=function(){am.disabled=true;if(Q){au.prop("disabled",true)}};aj.scroll=function(aJ,aE,aB,aC,aH){function aI(aL,aK,aN,aM){return aN*Math.sin(aL/aM*(Math.PI/2))+aK}function aF(){clearInterval(ae[aE]);delete ae[aE];aJ.data("pos",aB).closest(".dwwl").removeClass("dwa")}var aG=(ap-aB)*az,aD;if(aG==an[aE]&&ae[aE]){return}if(aC&&aG!=an[aE]){aA("onAnimStart",[T,aE,aC])}an[aE]=aG;aJ.attr("style",(l+"-transition:all "+(aC?aC.toFixed(3):0)+"s ease-out;")+(o?(l+"-transform:translate3d(0,"+aG+"px,0);"):("top:"+aG+"px;")));if(ae[aE]){aF()}if(aC&&aH!==undefined){aD=0;aJ.closest(".dwwl").addClass("dwa");ae[aE]=setInterval(function(){aD+=0.1;aJ.data("pos",Math.round(aI(aD,aH,aB-aH,aC)));if(aD>=aC){aF()}},100)}else{aJ.data("pos",aB)}};aj.setValue=function(aE,aD,aC,aB){if(!x.isArray(aj.temp)){aj.temp=am.parseValue(aj.temp+"",aj)}if(ad&&aE){av(aC)}al=am.formatResult(aj.temp);if(!aB){aj.values=aj.temp.slice(0);aj.val=al}if(aD){if(Q){au.val(al).trigger("change")}}};aj.getValues=function(){var aB=[],aC;for(aC in aj._selectedValues){aB.push(aj._selectedValues[aC])}return aB};aj.validate=function(aC,aB,aD,aE){av(aD,aC,true,aB,aE)};aj.change=function(aB){al=am.formatResult(aj.temp);if(am.display=="inline"){aj.setValue(false,aB)}else{x(".dwv",T).html(h(al))}if(aB){aA("onChange",[al])}};aj.changeWheel=function(aB,aG){if(T){var aE=0,aD,aC,aF=aB.length;for(aD in am.wheels){for(aC in am.wheels[aD]){if(x.inArray(aE,aB)>-1){Z[aE]=am.wheels[aD][aC];x(".dw-ul",T).eq(aE).html(ab(aE));aF--;if(!aF){ak();av(aG,undefined,true);return}}aE++}}}};aj.isVisible=function(){return ad};aj.tap=function(aC,aB){var aD,aE;if(am.tap){aC.bind("touchstart",function(aF){aF.preventDefault();aD=m(aF,"X");aE=m(aF,"Y")}).bind("touchend",function(aF){if(Math.abs(m(aF,"X")-aD)<20&&Math.abs(m(aF,"Y")-aE)<20){aB.call(this,aF)}F=true;setTimeout(function(){F=false},300)})}aC.bind("click",function(aF){if(!F){aB.call(this,aF)}})};aj.show=function(aF){if(am.disabled||ad){return false}if(am.display=="top"){ai="slidedown"}if(am.display=="bottom"){ai="slideup"}ac();aA("onBeforeShow",[T]);var aB=0,aE,aC,aG="";if(ai&&!aF){aG="dw-"+ai+" dw-in"}var aD='<div class="dw-trans '+am.theme+" dw-"+am.display+'">'+(am.display=="inline"?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+aG+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(am.headerText?'<div class="dwv"></div>':""));for(aE=0;aE<am.wheels.length;aE++){aD+='<div class="dwc'+(am.mode!="scroller"?" dwpm":" dwsc")+(am.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(aC in am.wheels[aE]){Z[aB]=am.wheels[aE][aC];aD+='<td><div class="dwwl dwrc dwwl'+aB+'">'+(am.mode!="scroller"?'<div class="dwwb dwwbp" style="height:'+az+"px;line-height:"+az+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+az+"px;line-height:"+az+'px;"><span>&ndash;</span></div>':"")+(am.showTitle?('<div class="dwl">'+aC+"</div>"):"")+'<div class="dww" style="height:'+(am.rows*az)+"px;min-width:"+am.width+'px;"><div class="dw-ul">';aD+=ab(aB);aD+='</div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';aB++}aD+="</tr></table></div></div>"}aD+=(am.display!="inline"?'<div class="dwbc'+(am.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+am.setText+"</span></span>"+(am.button3?'<span class="dwbw dwb-n"><span class="dwb">'+am.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+am.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>";T=x(aD);av();aA("onMarkupReady",[T]);if(am.display!="inline"){T.appendTo("body");setTimeout(function(){T.removeClass("dw-trans").find(".dw").removeClass(aG)},350)}else{if(au.is("div")){au.html(T)}else{T.insertAfter(au)}}aA("onMarkupInserted",[T]);ad=true;ah.init(T,aj);if(am.display!="inline"){aj.tap(x(".dwb-s span",T),function(){if(aj.hide(false,"set")!==false){aj.setValue(false,true);aA("onSelect",[aj.val])}});aj.tap(x(".dwb-c span",T),function(){aj.cancel()});if(am.button3){aj.tap(x(".dwb-n span",T),am.button3)}if(am.scrollLock){T.bind("touchmove",function(aH){if(aa<=R&&W<=ax){aH.preventDefault()}})}x("input,select,button").each(function(){if(!x(this).prop("disabled")){x(this).addClass("dwtd").prop("disabled",true)}});ak();x(window).bind("resize.dw",function(){clearTimeout(X);X=setTimeout(function(){ak(true)},100)})}T.delegate(".dwwl","DOMMouseScroll mousewheel",function(aJ){if(!ag(this)){aJ.preventDefault();aJ=aJ.originalEvent;var aL=aJ.wheelDelta?(aJ.wheelDelta/120):(aJ.detail?(-aJ.detail/3):0),aH=x(".dw-ul",this),aI=+aH.data("pos"),aK=Math.round(aI-aL);at(aH);i(aH,aK,aL<0?1:2)}}).delegate(".dwb, .dwwb",g,function(aH){x(this).addClass("dwb-a")}).delegate(".dwwb",g,function(aK){aK.stopPropagation();aK.preventDefault();var aH=x(this).closest(".dwwl");if(ao(aK)&&!ag(aH)&&!aH.hasClass("dwa")){C=true;var aI=aH.find(".dw-ul"),aJ=x(this).hasClass("dwwbp")?S:V;at(aI);clearInterval(s);s=setInterval(function(){aJ(aI)},am.delay);aJ(aI)}}).delegate(".dwwl",g,function(aH){aH.preventDefault();if(ao(aH)&&!n&&!ag(this)&&!C){n=true;x(document).bind(D,t);N=x(".dw-ul",this);z=am.mode!="clickpick";u=+N.data("pos");at(N);c=ae[y]!==undefined;r=m(aH,"Y");H=new Date();p=r;aj.scroll(N,y,u,0.001);if(z){N.closest(".dwwl").addClass("dwa")}}});aA("onShow",[T,al])};aj.hide=function(aC,aB){if(!ad||aA("onClose",[al,aB])===false){return false}x(".dwtd").prop("disabled",false).removeClass("dwtd");au.blur();if(T){if(am.display!="inline"&&ai&&!aC){T.addClass("dw-trans").find(".dw").addClass("dw-"+ai+" dw-out");setTimeout(function(){T.remove();T=null},350)}else{T.remove();T=null}ad=false;an={};x(window).unbind(".dw")}};aj.cancel=function(){if(aj.hide(false,"cancel")!==false){aA("onCancel",[aj.val])}};aj.init=function(aC){ah=E({defaults:{},init:a},Y.themes[aC.theme||am.theme]);U=Y.i18n[aC.lang||am.lang];E(aw,aC);E(am,ah.defaults,U,aw);aj.settings=am;au.unbind(".dw");var aB=Y.presets[am.preset];if(aB){af=aB.call(ay,aj);E(am,af,aw);E(B,af.methods)}ap=Math.floor(am.rows/2);az=am.height;ai=am.animate;if(au.data("dwro")!==undefined){ay.readOnly=b(au.data("dwro"))}if(ad){aj.hide()}if(am.display=="inline"){aj.show()}else{ac();if(Q&&am.showOnFocus){au.data("dwro",ay.readOnly);ay.readOnly=true;au.bind("focus.dw",function(){aj.show()})}}};aj.trigger=function(aB,aC){return aA(aB,aC)};aj.values=null;aj.val=null;aj.temp=null;aj._selectedValues={};aj.init(aw)}function k(Q){var h;for(h in Q){if(f[Q[h]]!==undefined){return true}}return false}function v(){var h=["Webkit","Moz","O","ms"],Q;for(Q in h){if(k([h[Q]+"Transform"])){return"-"+h[Q].toLowerCase()}}return""}function I(h){return P[h.id]}function m(Q,S){var R=Q.originalEvent,h=Q.changedTouches;return h||(R&&R.changedTouches)?(R?R.changedTouches[0]["page"+S]:h[0]["page"+S]):Q["page"+S]}function b(h){return(h===true||h=="true")}function d(R,Q,h){R=R>h?h:R;R=R<Q?Q:R;return R}function i(X,Q,S,T,V){Q=d(Q,O,q);var W=x(".dw-li",X).eq(Q),h=V===undefined?Q:V,U=y,R=T?(Q==h?0.1:Math.abs((Q-h)*0.1)):0;w.temp[U]=W.attr("data-val");w.scroll(X,U,Q,R,V);setTimeout(function(){w.validate(U,S,R,V)},10)}function K(Q,R,h){if(B[R]){return B[R].apply(Q,Array.prototype.slice.call(h,1))}if(typeof R==="object"){return B.init.call(Q,R)}return Q}var P={},s,a=function(){},L,O,q,w,M=new Date(),j=M.getTime(),n,C,N,y,r,p,H,u,c,z,f=document.createElement("modernizr").style,o=k(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),l=v(),E=x.extend,F,J,g="touchstart mousedown",D="touchmove mousemove",G="touchend mouseup",t=function(h){if(z){h.preventDefault();p=m(h,"Y");w.scroll(N,y,d(u+(r-p)/L,O-1,q+1))}c=true},A={width:70,height:40,rows:3,delay:300,disabled:false,readonly:false,showOnFocus:true,showLabel:true,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:true,showTitle:true,tap:true,formatResult:function(h){return h.join(" ")},parseValue:function(W,T){var V=T.settings.wheels,h=W.split(" "),U=[],R=0,S,Q,X;for(S=0;S<V.length;S++){for(Q in V[S]){if(V[S][Q][h[R]]!==undefined){U.push(h[R])}else{for(X in V[S][Q]){U.push(X);break}}R++}}return U}},B={init:function(h){if(h===undefined){h={}}return this.each(function(){if(!this.id){j+=1;this.id="scoller"+j}P[this.id]=new e(this,h)})},enable:function(){return this.each(function(){var h=I(this);if(h){h.enable()}})},disable:function(){return this.each(function(){var h=I(this);if(h){h.disable()}})},isDisabled:function(){var h=I(this[0]);if(h){return h.settings.disabled}},isVisible:function(){var h=I(this[0]);if(h){return h.isVisible()}},option:function(h,Q){return this.each(function(){var R=I(this);if(R){var S={};if(typeof h==="object"){S=h}else{S[h]=Q}R.init(S)}})},setValue:function(S,R,Q,h){return this.each(function(){var T=I(this);if(T){T.temp=S;T.setValue(true,R,Q,h)}})},getInst:function(){return I(this[0])},getValue:function(){var h=I(this[0]);if(h){return h.values}},getValues:function(){var h=I(this[0]);if(h){return h.getValues()}},show:function(){var h=I(this[0]);if(h){return h.show()}},hide:function(){return this.each(function(){var h=I(this);if(h){h.hide()}})},destroy:function(){return this.each(function(){var h=I(this);if(h){h.hide();x(this).unbind(".dw");delete P[this.id];if(x(this).is("input")){this.readOnly=b(x(this).data("dwro"))}}})}};x(document).bind(G,function(V){if(n){var S=new Date()-H,Q=d(u+(r-p)/L,O-1,q+1),R,W,U,T=N.offset().top;if(S<300){R=(p-r)/S;W=(R*R)/(2*0.0006);if(p-r<0){W=-W}}else{W=p-r}U=Math.round(u-W/L);if(!W&&!c){var X=Math.floor((p-T)/L),Y=x(".dw-li",N).eq(X),h=z;if(w.trigger("onValueTap",[Y])!==false){U=X}else{h=true}if(h){Y.addClass("dw-hl");setTimeout(function(){Y.removeClass("dw-hl")},200)}}if(z){i(N,U,0,true,Math.round(Q))}n=false;N=null;x(document).unbind(D,t)}if(C){clearInterval(s);C=false}x(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(h){if(F){h.stopPropagation();h.preventDefault();return false}});x.fn.mobiscroll=function(h){E(this,x.mobiscroll.shorts);return K(this,h,arguments)};x.mobiscroll=x.mobiscroll||{setDefaults:function(h){E(A,h)},presetShort:function(h){this.shorts[h]=function(Q){return K(this,E(Q,{preset:h}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}};x.scroller=x.scroller||x.mobiscroll;x.fn.scroller=x.fn.scroller||x.fn.mobiscroll})(jQuery);